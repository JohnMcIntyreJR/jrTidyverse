str_locate_all(beer, "/") %>%
map_dbl(~.x[nrow(.x)])
pos2 = str_locate_all(beer, "/") %>%
map_dbl(~.x[nrow(.x)])
pos == pos2
pos != pos2
sum(pos != pos2)
beer
beer %>%
str_extract("/(\\w|-|_)*$")
beer %>%
str_extract("/(\\w|-|_)*$")[5]
str_extract(beer, "/(\\w|-|_)*$")[5]
str_extract(beer, "/[(\\w-_]*$")[5]
str_extract(beer, "/[\\w-_]*$")[5]
beer %>%
str_extract("/[\\w-_]*$")
beer %>%
str_extract("/[\\w-_]*$") %>%
str_replace("/", "")
beer %>%
str_extract("/[\\w-_]*$") %>%
str_replace("/", "") %>%
str_replace("[-_]*", " ")
beer %>%
str_extract("/[\\w-_]*$") %>%
str_replace("/", "") %>%
str_replace_all("[-_]", " ")
beer %>%
str_extract("/[\\w-_]*$") %>%
str_replace("/", "") %>%
str_replace_all("[-_]", " ")
beer %>%
str_extract("/[\\w-_]*$") %>%
str_replace("/", "") %>%
str_replace_all("[-_]", " ") %>%
str_squish() %>%
str_to_title()
?`%>%`
?`%<>%`
beer %<>%
str_extract("/[\\w-_]*$") %>%
str_replace("/", "") %>%
str_replace_all("[-_]", " ") %>%
str_squish() %>%
str_to_title()
str_detect("the", "the")
data(beer, package = "jrTidyverse2")
URL = beer$URL
URL %<>%
str_extract("/[\\w-_]*$") %>%
str_replace("/", "") %>%
str_replace_all("[-_]", " ") %>%
str_squish() %>%
str_to_title()
beer$URL = URL
beer
beer %>%
mutate(Ale = str_detect(URL, "Ale"))
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"))
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa")) %>%
View()
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa")) %>%
View()
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = sum(Ale, Stout, Ipa))
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = sum(Ale, Stout, Ipa)) %>%
filter(yes != 0)
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = sum(Ale, Stout, Ipa)) %>%
View()
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa)) %>%
View()
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
View()
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0)
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0)
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"))
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"),
Stout = ifelse(Stout, "Stout", "no"))
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"),
Stout = ifelse(Stout, "Stout", "no"),
Ipa = ifelse(Ipa, "Ipa", "no"))
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"),
Stout = ifelse(Stout, "Stout", "no"),
Ipa = ifelse(Ipa, "Ipa", "no")) %>%
select(-yes) %>%
gather(Type, yes, Ale:Ipa)
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"),
Stout = ifelse(Stout, "Stout", "no"),
Ipa = ifelse(Ipa, "Ipa", "no")) %>%
select(-yes)
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"),
Stout = ifelse(Stout, "Stout", "no"),
Ipa = ifelse(Ipa, "Ipa", "no")) %>%
select(-yes) %>%
gather(Type, yes, Ale, Stout, Ipa)
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"),
Stout = ifelse(Stout, "Stout", "no"),
Ipa = ifelse(Ipa, "Ipa", "no")) %>%
select(-yes) %>%
gather(Type, yes, Ale, Stout, Ipa) %>%
filter(yes != "no")
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"),
Stout = ifelse(Stout, "Stout", "no"),
Ipa = ifelse(Ipa, "Ipa", "no")) %>%
select(-yes) %>%
gather(Type, yes, Ale, Stout, Ipa) %>%
filter(yes != "no") %>%
View()
beer %>%
mutate(Ale = str_detect(URL, "Ale"),
Stout = str_detect(URL, "Stout"),
Ipa = str_detect(URL, "Ipa"),
yes = Ale + Stout + Ipa) %>%
filter(yes != 0) %>%
mutate(Ale = ifelse(Ale, "Ale", "no"),
Stout = ifelse(Stout, "Stout", "no"),
Ipa = ifelse(Ipa, "Ipa", "no")) %>%
select(-yes) %>%
gather(Type, yes, Ale, Stout, Ipa) %>%
filter(yes != "no") %>%
select(-yes) %>%
ggplot(aes(Color, ABV, colour = Type)) +
geom_point()
day = c("Wed", "Sat", "Fri", "Mon")
sort(day)
factor(day)
factor(day, levels = c("Mon", "Tue",
"Wed", "Thu",
"Fri", "Sat", "Sun"))
day = factor(day, levels = c("Mon", "Tue",
"Wed", "Thu",
"Fri", "Sat", "Sun"))
sort(day)
data(movies, package = "ggplot2movies")
movies %>%
group_by(mpaa) %>%
summarise(mean_r = mean(rating))
rating_mean = movies %>%
group_by(mpaa) %>%
summarise(mean_r = mean(rating))
ggplot(rating_mean) +
geom_point(aes(x = mpaa, y = mean_r))
library("forcats")
ggplot(rating_mean) +
geom_point(aes(x = fct_reorder(mpaa, mean_r),
y = mean_r))
ggplot(rating_mean) +
geom_point(aes(x = fct_reorder(mpaa, desc(mean_r)),
y = mean_r))
ggplot(rating_mean) +
geom_point(aes(x = fct_relevel(mpaa,
"", "PG",
"PG-13", "R",
"NC-17"),
y = mean_r))
ggplot(rating_mean) +
geom_point(aes(x = fct_recode(mpaa, "Unknown" = ""),
y = mean_r))
rating_mean %>%
mutate(mpaa = fct_recode(mpaa, "Unknown" = ""))
rating_mean %>%
mutate(mpaa = fct_recode(mpaa, "Unknown" = ""),
mpaa = fct_reorder(mpaa, desc(mean_r)))
rating_mean %>%
mutate(mpaa = fct_recode(mpaa, "Unknown" = ""),
mpaa = fct_reorder(mpaa, desc(mean_r))) %>%
ggplot() +
geom_point(aes(x = mpaa, y = mea_r))
rating_mean %>%
mutate(mpaa = fct_recode(mpaa, "Unknown" = ""),
mpaa = fct_reorder(mpaa, desc(mean_r))) %>%
ggplot() +
geom_point(aes(x = mpaa, y = mean_r))
rating_mean %>%
mutate(mpaa = fct_recode(mpaa, "Unknown" = ""),
mpaa = fct_collapse(mpaa,
Child = c("PG", "PG-13"),
Adult = c("R", "NC-17")))
rating_mean %>%
mutate(mpaa = fct_recode(mpaa, "Unknown" = ""),
mpaa = fct_collapse(mpaa,
Child = c("PG", "PG-13"),
Adult = c("R", "NC-17"))) %>%
group_by(mpaa) %>%
summarise(mean_r = mean(mean_r))
rating_mean %>%
mutate(mpaa = fct_recode(mpaa, "Unknown" = ""),
mpaa = fct_collapse(mpaa,
Child = c("PG", "PG-13"),
Adult = c("R", "NC-17"))) %>%
group_by(mpaa) %>%
summarise(mean_r = mean(mean_r)) %>%
ggplot() +
geom_point(aes(x = mpaa, y = mean_r))
library("tidytext")
data(dickens, package = "jrTidyverse2")
View(dickens)
?unnest_tokens
dickens %>%
unnest_tokens(word, text, token = "words")
dickens %>%
unnest_tokens(word, text, token = "words") %>%
View()
dickens = dickens %>%
unnest_tokens(word, text, token = "words")
dickens %>%
count(word)
dickens %>%
count(word) %>%
arrange(n)
dickens %>%
count(word) %>%
arrange(desc(n))
?get_stopwords
stopwords_getsources()
stopwords::stopwords_getsources()
get_stopwords()
get_stopwords() %>%
View()
get_stopwords(source = "smart") %>%
View()
sw = get_stopwords()
sw %>%
View(())
sw %>%
View()
anti_join(dickens, sw, by = "word")
dickens = anti_join(dickens, sw, by = "word")
dickens %>%
count(word) %>%
arrange(desc(n))
get_sentiments()
?get_sentiments
get_sentiments(lexicon = "afinn")
get_sentiments(lexicon = "bing")
get_sentiments(lexicon = "bing") %>%
View()
get_sentiments(lexicon = "nrc")
get_sentiments(lexicon = "nrc") %>%
View()
get_sentiments(lexicon = "loughran") %>%
View()
get_sentiments()
sent = get_sentiments()
inner_join(dickens, sent, by = "word")
dickens = inner_join(dickens, sent, by = "word")
dickens %>%
unnest_tokens(word, text, token = "words") %>%
anti_join(get_stopwords(), by = "word") %>%
inner_join(get_sentiments(), by = "word") %>%
group_by(book) %>%
summarise(mean(score))
data(dickens, package = "jrTidyverse2")
dickens %>%
unnest_tokens(word, text, token = "words") %>%
anti_join(get_stopwords(), by = "word") %>%
inner_join(get_sentiments(), by = "word") %>%
group_by(book) %>%
summarise(mean(score))
library("worldcloud")
library("wordcloud")
dickens = dickens %>%
unnest_tokens(word, text, token = "words") %>%
anti_join(get_stopwords(), by = "word") %>%
inner_join(get_sentiments(), by = "word")
dickens %>%
filter(book == "Oliver Twist")
dickens %>%
filter(book == "Oliver Twist") %>%
count(word)
dickens_count = dickens %>%
filter(book == "Oliver Twist") %>%
count(word)
wordcloud(dickens_count$word, dickens_count$n,
max.words = 100)
?wordcloud
wordcloud(dickens_count$word, dickens_count$n,
max.words = 100, random.order = FALSE)
wordcloud(dickens_count$word, dickens_count$n,
max.words = 100, random.order = FALSE)
wordcloud(dickens_count$word, dickens_count$n,
max.words = 100, random.order = FALSE,
ordered.colors = TRUE)
wordcloud(dickens_count$word, dickens_count$n,
max.words = 100, random.order = FALSE,
ordered.colors = TRUE,
random.color = TRUE)
wordcloud(dickens_count$word, dickens_count$n,
max.words = 100, random.order = FALSE,
colors = c("red", "blue"))
wordcloud(dickens_count$word, dickens_count$n,
max.words = 100, random.order = FALSE,
colors = c("red", "blue", "green"))
data(dickens, package = "jrTidyverse2")
dickens %>%
filter(book == "David Copperfield") %>%
unnest_tokens(bigram, text,
token = "ngrams",
n = 2)
dickens %>%
filter(book == "David Copperfield") %>%
unnest_tokens(bigram, text,
token = "ngrams",
n = 2) %>%
View()
dickens %>%
filter(book == "David Copperfield") %>%
unnest_tokens(bigram, text,
token = "ngrams",
n = 2) %>%
drop_na(bigram)
dickens = dickens %>%
filter(book == "David Copperfield") %>%
unnest_tokens(bigram, text,
token = "ngrams",
n = 2) %>%
drop_na(bigram)
dickens %>%
count(bigram)
dickens %>%
count(bigram, sort = TRUE)
dickens %>%
separate(bigram, c("word1", "word2"),
sep = " ")
dickens %>%
separate(bigram, c("word1", "word2"),
sep = " ")
dickens %>%
separate(bigram, c("word1", "word2"),
sep = " ") %>%
View()
sw = get_stopwords()
dickens =dickens %>%
separate(bigram, c("word1", "word2"),
sep = " ")
data(dickens, package = "jrTidyverse2")
dickens = dickens %>%
filter(book == "David Copperfield") %>%
unnest_tokens(bigram, text,
token = "ngrams",
n = 2) %>%
drop_na(bigram)
dickens =dickens %>%
separate(bigram, c("word1", "word2"),
sep = " ") %>%
filter(!word1 %in% sw$word) %>%
filter(!word2 %in% sw$word)
dickens %>%
count(word1, word2)
dickens %>%
count(word1, word2, sort = TRUE)
library("igraph")
dickens %>%
count(word1, word2, sort = TRUE) %>%
filter(n > 15) %>%
graph_from_data_frame()
dickens_graph = dickens %>%
count(word1, word2, sort = TRUE) %>%
filter(n > 15) %>%
graph_from_data_frame()
library("ggraph")
ggraph(dickens_graph, layout = "fr")
ggraph(dickens_graph, layout = "fr") +
geom_edge_link()
ggraph(dickens_graph, layout = "fr") +
geom_edge_link() +
geom_node_point()
ggraph(dickens_graph, layout = "fr") +
geom_edge_link() +
geom_node_point() +
geom_node_text(aes(label = name))
ggraph(dickens_graph, layout = "fr") +
geom_edge_link() +
geom_node_point() +
geom_node_text(aes(label = name),
vjust = 1,
hjust = 1)
vignette("forcats_solutions",
package = "jrTidyverse2")
vignette("purrr_solutions",
package = "jrTidyverse2")
list(c(1,2,3,4),1 , "a")
x = list(c(1,2,3,4),1 , "a")
x[1]
x[[1]]
dickens
dickens %>%
slice(1)
dickens %>%
slice(1:3)
dickens %>%
group_by(book) %>%
slice(1:3)
dickens %>%
group_by(chapter) %>%
slice(1:3)
library(jrTidyverse)
library(jrTidyverse)
data(okcupid, package = "jrTidyverse")
library("jrTidyverse")
okcupid = okcupid %>%
mutate(last_online = ymd_hms(last_online, tz = "America/Los_Angeles"))
library("tidyverse")
okcupid = okcupid %>%
mutate(last_online = ymd_hms(last_online, tz = "America/Los_Angeles"))
library(lubridate)
okcupid = okcupid %>%
mutate(last_online = ymd_hms(last_online, tz = "America/Los_Angeles"))
okcupid = okcupid %>%
mutate(week_day = wday(last_online, label = TRUE))
okcupid %>%
count(week_day)
library(jrTidyverse)
drat::addRepo("jr-packages")
install.packages("jrTidyverse")
vignette(package = "jrTidyverse")
library(jrTidyverse)
drat::addRepo("jr-packages")
install.packages("jrTidyverse")
install.packages("jrTidyverse")
vignette(package = "jrTidyverse")
drat::addRepo("jr-packages")
install.packages("jrTidyverse")
vignette(package = "jrTidyverse")
setwd("~/GitHub/Notes/jrTidyverse_notes")
